### **OPTICS**

#### **1. Авторы и Основная Идея**

*   **Авторы:** Mihael Ankerst, Markus M. Breunig, Hans-Peter Kriegel, Jorg Sander.
*   **Основная идея:** OPTICS — это алгоритм кластеризации, который не строит единственное разбиение на кластеры, а создает **упорядоченный список объектов (cluster-ordering)**, отражающий плотностную структуру данных. Этот порядок содержит информацию, эквивалентную результатам плотностной кластеризации (как в DBSCAN) для *широкого диапазона* параметров плотности.

#### **2. Проблемы Существующих Алгоритмов (Мотивация)**

Существующие алгоритмы кластеризации (до OPTICS) страдали от трех взаимосвязанных проблем:
1.  **Зависимость от гиперпараметров:** Требуют задания параметров (например, количества кластеров `k` или радиуса `ε`), которые сложно подобрать, особенно в высокоразмерных данных.
2.  **Чувствительность к параметрам:** Небольшое изменение параметров может радикально изменить результат кластеризации.
3.  **Неоднородность плотности:** Реальные данные часто имеют кластеры с разной локальной плотностью. Невозможно подобрать один глобальный параметр плотности, который бы выявил все такие кластеры одновременно.

#### **3. Ключевые Определения (Из DBSCAN)**

OPTICS основан на понятиях плотностной кластеризации из алгоритма DBSCAN:
*   **`ε` (eps):** Максимальное расстояние (радиус) для рассмотрения окрестности точки.
*   **`MinPts`:** Минимальное количество точек в `ε`-окрестности точки.
*   **Core Object (Ядровая точка):** Точка, в чьей `ε`-окрестности находится не менее `MinPts` точек.
*   **Directly Density-Reachable (Напрямую достижимая):** Точка `p` напрямую достижима из `q`, если `p` находится в `ε`-окрестности `q` и `q` является ядровой.
*   **Density-Reachable (Достижимая):** Транзитивное замыкание прямой достижимости. Цепочка из напрямую достижимых точек.
*   **Density-Connected (Связанная):** Две точки связаны, если существует третья точка, из которой обе достижимы.
*   **Cluster (Кластер):** Максимальное множество взаимно связанных точек.
*   **Noise (Шум):** Точки, не входящие ни в один кластер.

#### **4. Новые Определения в OPTICS**

*   **Core Distance (Ядровое расстояние):**
    *   Минимальный радиус `ε'`, при котором точка `p` становится ядровой (при заданном `MinPts`).
    *   Если `p` не ядровая при `ε`, то `UNDEFINED`.
    *   `core_distance(p) = distance до MinPts-ой ближайшей точки`.

*   **Reachability Distance (Достижимое расстояние):**
    *   Минимальный радиус, при котором точка `p` будет напрямую достижима из ядровой точки `o`.
    *   Не может быть меньше `core_distance(o)`.
    *   `reachability_distance(p, o) = max( core_distance(o), distance(o, p) )`.
    *   Если `o` не ядровая, то `UNDEFINED`.

#### **5. Алгоритм OPTICS**

**Цель:** Создать упорядоченный список точек, где близко расположенные в порядке точки будут принадлежать одному кластеру.

**Входные параметры:**
*   `SetOfObjects`: Множество объектов для кластеризации.
*   `ε`: Максимальный радиус (генеративное расстояние, должно быть "достаточно большим").
*   `MinPts`: Минимальное количество точек в окрестности.

**Выходные данные:**
*   **Упорядочивание точек:** `σ: {1..n} → DB`.
*   **Достижимые расстояния:** `r: {1..n} → R≥0`.
*   **Ядровые расстояния** для каждой точки.

**Процесс:**
1.  **Инициализация:** Все точки помечаются как необработанные.
2.  **Основной цикл:** Для каждой необработанной точки `p`:
    *   Вычисляется ее `ε`-окрестность, `core_distance` и `reachability_distance` (изначально `UNDEFINED`).
    *   Точка `p` записывается в упорядоченный список.
    *   Если `p` — ядровая точка (`core_distance` ≠ `UNDEFINED`), то ее соседи помещаются в **приоритетную очередь (SeedList)**, где приоритет — это их `reachability_distance` относительно `p` (чем меньше расстояние, тем выше приоритет).
3.  **Обработка очереди:** Пока очередь не пуста, извлекается точка с наименьшим `reachability_distance`. Для нее повторяются шаги: запись в список, проверка на ядровость и обновление очереди соседей.

**Сложность:** Без индекса — `O(n²)`. С использованием spatial index (например, R*-tree) — `O(n log n)`.

#### **6. Визуализация и Анализ Результатов**

**Reachability Plot (График достижимости):**
*   **По оси X:** Порядок точек, сгенерированный алгоритмом OPTICS.
*   **По оси Y:** `reachability_distance` для каждой точки.
*   **Интерпретация:**
    *   **Кластеры** выглядят как "долины" (valleys) — участки с низкими значениями достижимости (высокая плотность).
    *   **Границы кластеров и шум** — это "пики" (peaks).
*   **Преимущества:**
    *   Показывает иерархическую структуру кластеров разной плотности.
    *   Инвариантен к размерности данных.
    *   Устойчив к выбору параметров `ε` и `MinPts` (если они выбраны "достаточно большими").

**Attribute Plot (Атрибутивный график):**
*   Дополняет Reachability Plot.
*   Показывает значения отдельных признаков для каждой точки в порядке OPTICS.
*   Помогает понять, какие атрибуты влияют на формирование кластеров.

**Визуализация для больших данных (Circle Segments):**
*   Пиксельная техника для визуализации высокоразмерных данных.
*   Круг разбивается на сегменты по количеству атрибутов.
*   Значения атрибутов и достижимости кодируются цветом/яркостью и отображаются от центра к краю круга в порядке OPTICS.
*   Позволяет одновременно увидеть кластерную структуру и значения всех признаков.

#### **7. Автоматическое Извлечение Кластеров (ξ-Clusters)**

**Цель:** Автоматически найти все кластеры на графике достижимости.

**Основные понятия:**
*   **ξ-steep point (Крутая точка):**
    *   **Downward:** Точка `p`, значение которой как минимум на `ξ%` выше, чем у следующей точки `p+1` (резкий спад).
    *   **Upward:** Точка `p`, значение которой как минимум на `ξ%` ниже, чем у следующей точки `p+1` (резкий подъем).
*   **ξ-steep area (Крутая область):** Интервал, состоящий из последовательных крутых точек (или с небольшими нарушениями, < `MinPts` подряд).
*   **ξ-cluster:** Определяется парой: `D` (крутая нисходящая область) и `U` (крутая восходящая область).
    1.  Начало кластера `s` лежит в `D`.
    2.  Конец кластера `e` лежит в `U`.
    3.  Кластер должен содержать не менее `MinPts` точек, и все значения внутри него должны быть достаточно низкими относительно границ.
    4.  Точные границы `s` и `e` вычисляются на основе сравнения значений на границах `D` и `U`.

**Алгоритм ExtractClusters:**
*   Эффективно за один проход по графику находит все `ξ-steep` области и комбинирует их в кластеры, проверяя условия.
*   Использует технику "maximum-in-between" (mib) значений для оптимизации.
*   **Сложность:** Линейная от количества точек `O(n)`.
*   **Параметр `ξ`:** Контролирует "строгость" кластеров. Большее `ξ` → только самые выраженные кластеры. Меньшее `ξ` → более чувствительные, но, возможно, менее значимые кластеры.

#### **8. Извлечение Кластеризации для Конкретного ε (ExtractDBSCAN-Clustering)**

*   Имея порядок, сгенерированный OPTICS, можно быстро получить разбиение на кластеры, эквивалентное DBSCAN, для любого `ε' ≤ ε`.
*   Алгоритм "сканирует" порядок:
    *   Если `reachability_distance` точки > `ε'`, она может быть либо шумом, либо началом нового кластера (если ее `core_distance` ≤ `ε'`).
    *   Если `reachability_distance` ≤ `ε'`, точка присваивается текущему кластеру.

#### **9. Выводы и Будущие Исследования**

*   **Главное преимущество OPTICS:** Он не привязан к одному параметру плотности и раскрывает полную иерархическую кластерную структуру данных.
*   **Гибкость применения:** Результаты можно использовать как для **интерактивного визуального анализа** (через Reachability Plot и Circle Segments), так и для **автоматического извлечения** кластеров и их иерархии.
*   **Направления будущих исследований:**
    *   Повышение масштабируемости для очень больших и высокоразмерных баз данных (например, за счет аппроксимаций).
    *   Разработка методов инкрементального обновления кластер-упорядочивания при поступлении новых данных.

---
